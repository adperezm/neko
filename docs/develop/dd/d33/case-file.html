<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Neko: Case File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Neko
   &#160;<span id="projectnumber">0.7.99</span>
   </div>
   <div id="projectbrief">A portable framework for high-order spectral element flow simulations</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dd/d33/case-file.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Case File </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_pages_case_file"></a> The case file defines all the parameters of a simulation. The format of the file is JSON, making it easy to read and write case files using the majority of the popular programming languages. JSON is heirarchical and, and consists of parameter blocks enclosed in curly braces. These blocks are referred to as objects. The case file makes use objects to separate the configuration of different parts of the solver. We refer the reader to the examples shipped with the code to get a good idea of how a case file looks. The table below provides a complete reference for all possible configuration choices.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
High-level structure</h1>
<p>The current high-level structure of the case file is shown below.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    &quot;version&quot;: 1.0</div>
<div class="line">    &quot;case&quot;: {</div>
<div class="line">        &quot;numerics&quot;: {}</div>
<div class="line">        &quot;fluid&quot;: {}</div>
<div class="line">        &quot;scalar&quot;: {}</div>
<div class="line">        &quot;statistics&quot;: {}</div>
<div class="line">        &quot;simulation_components&quot; : []</div>
<div class="line">        &quot;point_zones&quot; : []</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p> The <code>version</code> keywords is reserved to track changes in the format of the file. The the subsections below we list all the configuration options for each of the high-level objects. Some parameters will have default values, and are therefore optional.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Output frequency control</h1>
<p>A common scheme for controlling the output frequency is applied for various outputs. It is described already now in order to clarify the meaning of several parameters found in the tables below.</p>
<p>The frequency is controlled by two paramters, ending with <code>_control</code> and <code>_value</code>, respectively. The latter name is perhaps not ideal, but it is somewhat difficult to come up with a good one, suggestions are welcome.</p>
<p>The <code>_value</code> parameter is a number, that defines the output frequency, but the interpretation of that number depends on the choice of <code>_control</code>. The three following options are possible.</p><ol type="1">
<li><code>simulationtime</code>, then <code>_value</code> is the time interval between the outputs.</li>
<li><code>tsteps</code>, then <code>_value</code> is the number of time steps between the outputs.</li>
<li><code>nsamples</code>, then <code>_value</code> is the total number of outputs that will be performed in the course of the simulation.</li>
<li><code>never</code>, then <code>_value</code> is ignored and output is never performed.</li>
</ol>
<h1><a class="anchor" id="autotoc_md5"></a>
The case object</h1>
<p>This object is mostly used as a high-level container for all the other objects, but also defines several parameters that pertain to the simulation as a whole.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Admissable values   </th><th class="markdownTableHeadNone">Default value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>mesh_file</code>   </td><td class="markdownTableBodyNone">The name of the mesh file.   </td><td class="markdownTableBodyNone">Strings ending with <code>.nmsh</code>   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>output_boundary</code>   </td><td class="markdownTableBodyNone">Whether to write a <code>bdry0.f0000</code> file with boundary labels. Can be used to check boundary conditions.   </td><td class="markdownTableBodyNone"><code>true</code> or <code>false</code>   </td><td class="markdownTableBodyNone"><code>false</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>output_directory</code>   </td><td class="markdownTableBodyNone">Folder for redirecting solver output. Note that the folder has to exist!   </td><td class="markdownTableBodyNone">Path to an existing directory   </td><td class="markdownTableBodyNone"><code>.</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>output_precision</code>   </td><td class="markdownTableBodyNone">Whether to output snapshots in single or double precision   </td><td class="markdownTableBodyNone"><code>single</code> or <code>double</code>   </td><td class="markdownTableBodyNone"><code>single</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>load_balancing</code>   </td><td class="markdownTableBodyNone">Whether to apply load balancing.   </td><td class="markdownTableBodyNone"><code>true</code> or <code>false</code>   </td><td class="markdownTableBodyNone"><code>false</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>output_partitions</code>   </td><td class="markdownTableBodyNone">Whether to write a <code>partitions.vtk</code> file with domain partitioning.   </td><td class="markdownTableBodyNone"><code>true</code> or <code>false</code>   </td><td class="markdownTableBodyNone"><code>false</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>output_checkpoints</code>   </td><td class="markdownTableBodyNone">Whether to output checkpoints, i.e. restart files.   </td><td class="markdownTableBodyNone"><code>true</code> or <code>false</code>   </td><td class="markdownTableBodyNone"><code>false</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>checkpoint_control</code>   </td><td class="markdownTableBodyNone">Defines the interpretation of <code>checkpoint_value</code> to define the frequency of writing checkpoint files.   </td><td class="markdownTableBodyNone"><code>nsamples</code>, <code>simulationtime</code>, <code>tsteps</code>, <code>never</code>   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>checkpoint_value</code>   </td><td class="markdownTableBodyNone">The frequency of sampling in terms of <code>checkpoint_control</code>.   </td><td class="markdownTableBodyNone">Positive real or integer   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>restart_file</code>   </td><td class="markdownTableBodyNone">checkpoint to use for a restart from previous data   </td><td class="markdownTableBodyNone">Strings ending with <code>.chkp</code>   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>time_step</code>   </td><td class="markdownTableBodyNone">Time-step size.   </td><td class="markdownTableBodyNone">Positive reals   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>end_time</code>   </td><td class="markdownTableBodyNone">Final time at which the simulation is stopped.   </td><td class="markdownTableBodyNone">Positive reals   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>job_timelimit</code>   </td><td class="markdownTableBodyNone">The maximum wall clock duration of the simulation.   </td><td class="markdownTableBodyNone">String formatted as HH:MM:SS   </td><td class="markdownTableBodyNone">No limit   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md6"></a>
Numerics</h1>
<p>Used to define the properties of the numerical discretization.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Admissable values   </th><th class="markdownTableHeadNone">Default value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>polynomial_order</code>   </td><td class="markdownTableBodyNone">The oder of the polynomial basis.   </td><td class="markdownTableBodyNone">Integers, typically 5 to 9   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>time_order</code>   </td><td class="markdownTableBodyNone">The order of the time integration scheme. Refer to the <code><a class="el" href="../../dc/dfb/namespacetime__scheme__controller.html" title="Compound scheme for the advection and diffusion operators in a transport equation.">time_scheme_controller</a></code> type documention for details.   </td><td class="markdownTableBodyNone">1,2, 3   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>dealias</code>   </td><td class="markdownTableBodyNone">Whether to apply dealiasing to advection terms.   </td><td class="markdownTableBodyNone"><code>true</code> or <code>false</code>   </td><td class="markdownTableBodyNone"><code>false</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>dealiased_polynomial order</code>   </td><td class="markdownTableBodyNone">The polynomial order in the higher-order space used in the dealising.   </td><td class="markdownTableBodyNone">Integer   </td><td class="markdownTableBodyNone"><code>3/2(polynomial_order + 1) - 1</code>   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md7"></a>
Fluid</h1>
<p>The configuration of the fluid solver and the flow problem. Contains multiple subobjects for various parts of the setup.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Material properties</h2>
<p>As per the governing equations, Neko requires the value of the density and dynamic viscosity to define the flow problem. These can be provided as <code>rho</code> and <code>mu</code> in the case file.</p>
<p>Alternatively, one may opt to provide the Reynolds number, <code>Re</code>, which corresponds to a non-dimensional formulation of the Navier-Stokes equations. This formulation can effectively be obtained by setting \( \rho = 1 \) and \( \mu = 1/Re \). This is exactly what Neko does under the hood, when <code>Re</code> is provided in the case file.</p>
<p>Note that if both <code>Re</code> and any of the dimensional material properties are provided, the simulation will issue an error.</p>
<p>As an alternative to providing material properties in the case file, it is possible to do that in a special routine in the user file. This is demonstrated in the <code>rayleigh-benard-cylinder</code> example. Ultimately, both <code>rho</code> and <code>mu</code> have to be set in the subroutine, but it can be based on arbitrary computations and arbitrary parameters read from the case file. Additionally, this allows to change the material properties in time.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Inflow boundary conditions</h2>
<p>The object <code>inflow_condition</code> is used to specify velocity values at a Dirichlet boundary. This does not necessarily have to be an inflow boundary, so the name is not so good, and will most likely be changed along with type changes in the code. Since not all cases have Dirichlet boundaries (note, the special case of a no-slip boundary is treated separately in the configuration), this object is not obligatory. The means of prescribing the values are controlled via the <code>type</code> keyword:</p>
<ol type="1">
<li><code>user</code>, the values are set inside the compiled user file.</li>
<li><code>uniform</code>, the value is a constant vector, looked up under the <code>value</code> keyword.</li>
<li><code>blasius</code>, a Blasius profile is prescribed. Its properties are looked up in the <code>case.fluid.blasius</code> object, see below.</li>
</ol>
<h2><a class="anchor" id="case-file_fluid-ic"></a>
Initial conditions</h2>
<p>The object <code>initial_condition</code> is used to provide initial conditions. It is mandatory. Note that this currently pertains to both the fluid, but also scalars. The means of prescribing the values are controlled via the <code>type</code> keyword:</p>
<ol type="1">
<li><code>user</code>, the values are set inside the compiled user file. The only way to initialize scalars.</li>
<li><code>uniform</code>, the value is a constant vector, looked up under the <code>value</code> keyword.</li>
<li><code>blasius</code>, a Blasius profile is prescribed. Its properties are looked up in the <code>case.fluid.blasius</code> object, see below.</li>
</ol>
<h2><a class="anchor" id="autotoc_md10"></a>
Blasius profile</h2>
<p>The <code>blasius</code> object is used to specify the Blasius profile that can be used for the initial and inflow condition. The boundary cannot be tilted with respect to the coordinate axes. It requires the following parameters:</p>
<ol type="1">
<li><code>delta</code>, the thickness of the boundary layer.</li>
<li><code>freestream_velocity</code>, the velocity value in the free stream.</li>
<li><code>approximation</code>, the numerical approximation to the Blasius profile.<ul>
<li><code>linear</code>, linear approximation.</li>
<li><code>quadratic</code>, quadratic approximation.</li>
<li><code>cubic</code>, cubic approximation.</li>
<li><code>quartic</code>, quartic approximation.</li>
<li><code>sin</code>, sine function approximation.</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="case-file_fluid-source-term"></a>
Source terms</h2>
<p>The <code>source_terms</code> object should be used to specify the source terms in the momentum equation. The object is not mandatory, by default no forcing term is present. Each source term, is itself a JSON object, so <code>source_terms</code> is just an array of them. Note that with respect to the governing equations, the source terms define \( f^u \), meaning that the values are then multiplied by the density.</p>
<p>For each source, the <code>type</code> keyword defines the kind of forcing that will be introduced. Furthermore, the <code>start_time</code> and <code>end_time</code> keywords can be used to set a time frame for when the source term is active. Note, however, that these keywords have no effect on the user-defined source terms, but their execution can, of course, be directly controlled in the user code. By default, all source terms are active during the entire simulation.</p>
<p>The following types are currently implemented.</p>
<ol type="1">
<li><code>constant</code>, constant forcing. Strength defined by the <code>values</code> array with 3 reals corresponding to the 3 components of the forcing.</li>
<li><code>user_pointwise</code>, the values are set inside the compiled user file, using the pointwise user file subroutine. Only works on CPUs!</li>
<li><code>user_vector</code>, the values are set inside the compiled user file, using the non-pointwise user file subroutine. Should be used when running on the GPU.</li>
<li><code>brinkman</code>, Brinkman permeability forcing inside a pre-defined region.</li>
</ol>
<h3><a class="anchor" id="autotoc_md11"></a>
Brinkman</h3>
<p>The Brinkman source term introduces regions of resistance in the fluid domain. The volume force $f_i$ applied in the selected regions are proportional to the fluid velocity component $u_i$.</p>
<p>$$ f_i(x) = - B(x) u_i(x), \ B(x) = \kappa_0 + (\kappa_1 - \kappa_0) \xi(x) \frac{q + 1}{q + \xi(x)}, $$</p>
<p>where, $x$ is the current location in the domain, $\xi: x \mapsto [0,1]$ represent an indicator function for the resistance where $\xi(x) = 0$ is a free flow. $\kappa_i$ describes the limits for the force application at $\xi(x)=0$ and $\xi(x)=1$. A penalty parameter $q$ help us to reduce numerical problems.</p>
<p>The indicator function will be defined based on the region type. The following types are currently implemented.</p>
<ol type="1">
<li><code>boundary_mesh</code>, the indicator function is defined based on the signed distance function to the specified mesh and a transformation such as a <code>step</code> or <code>smooth_step</code> function. Additional keywords are available to modify the Brinkman force term.</li>
</ol>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Admissable values   </th><th class="markdownTableHeadNone">Default value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>region.type</code>   </td><td class="markdownTableBodyNone">Type of region to enforce the Brinkman force term.   </td><td class="markdownTableBodyNone"><code>boundary_mesh</code>   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>region.name</code>   </td><td class="markdownTableBodyNone">Name of the region.   </td><td class="markdownTableBodyNone">String, file name.   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>brinkman.limits</code>   </td><td class="markdownTableBodyNone">Brinkman factor at freeflow ($\xi(x)=0$) and solid domain ($\xi(x)=1$).   </td><td class="markdownTableBodyNone">Vector if 2 reals.   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>brinkman.penalty</code>   </td><td class="markdownTableBodyNone">Panalty parameter when estimating Brinkman factor   </td><td class="markdownTableBodyNone">Real   </td><td class="markdownTableBodyNone">$1.0$    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>distance_transform.type</code>   </td><td class="markdownTableBodyNone">How to map from distance field to indicator field.   </td><td class="markdownTableBodyNone"><code>step</code>, <code>smooth_step</code>   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>distance_transform.value</code>   </td><td class="markdownTableBodyNone">Values used to define the distance transform, such as cutoff distance.   </td><td class="markdownTableBodyNone">Real   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>filter.type</code>   </td><td class="markdownTableBodyNone">Type of filtering appllied to the indicator field.   </td><td class="markdownTableBodyNone"><code>none</code>   </td><td class="markdownTableBodyNone"><code>none</code>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md12"></a>
Boundary types</h2>
<p>The optional <code>boundary_types</code> keyword can be used to specify boundary conditions. The reason for it being optional, is that some conditions can be specified directly inside the mesh file. In particular, this happens when Nek5000 <code>.<a class="el" href="../../dd/da1/namespacere2.html" title="NEKTON re2 format.">re2</a></code> files are converted to <code>.nmsh</code>. Periodic boundary conditions are <em>always</em> defined inside the mesh file.</p>
<p>The value of the keyword is an array of strings, with the following possible values:</p><ul>
<li><code>w</code>, a no-slip wall.</li>
<li><code>v</code>, a Dirichlet boundary.</li>
<li><code>sym</code>, a symmetry boundary.</li>
<li><code>on</code>, Dirichlet for the boundary-parallel velocity and homogeneous Neumann for the wall-normal. The wall-parallel velocity is defined by the initial condition.</li>
<li><code>o</code>, outlet boundary.</li>
<li><code>o+dong</code>, outlet boundary using the Dong condition.</li>
<li><code>on+dong</code>, an <code>on</code> boundary using the Dong condition, ensuring that the wall-normal velocity is directed outwards.</li>
</ul>
<p>In some cases, only some boundary types have to be provided. For example, when one has periodic boundaries, like in the channel flow example. In this case, to put the specification of the boundary at the right index, preceding boundary types can be marked with an empty string. For example, if boundaries with index 1 and 2 are periodic, and the third one is a wall, we can set. </p><div class="fragment"><div class="line">&quot;boundary_types&quot;: [&quot;&quot;, &quot;&quot;, &quot;w&quot;]</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md13"></a>
Linear solver configuration</h1>
<p>The mandatory <code>velocity_solver</code> and <code>pressure_solver</code> objects are used to configure the solvers for the momentum and pressure-Poisson equation. The following keywords are used, with the corresponding options.</p>
<ul>
<li><code>type</code>, solver type.<ul>
<li><code>cg</code>, a conjugate gradient solver.</li>
<li><code>pipecg</code>, a pipelined conjugate gradient solver.</li>
<li><code>bicgstab</code>, a bi-conjugate gradient stabilized solver.</li>
<li><code>cacg</code>, a communication-avoiding conjugate gradient solver.</li>
<li><code>gmres</code>, a GMRES solver. Typically used for pressure.</li>
<li><code>fusedcg</code>, a conjugate gradient solver optimised for accelerators using kernel fusion.</li>
</ul>
</li>
<li><code>preconditioner</code>, preconditioner type.<ul>
<li><code>jacobi</code>, a Jacobi preconditioner. Typically used for velocity.</li>
<li><code>hsmg</code>, a hybrid-Schwarz multigrid preconditioner. Typically used for pressure.</li>
<li><code>ident</code>, an identity matrix (no preconditioner).</li>
</ul>
</li>
<li><code>absolute_tolerance</code>, tolerance criterion for convergence.</li>
<li><code>max_iterations</code>, maximum number of iterations before giving up.</li>
<li><code>projection_space_size</code>, size of the vector space used for accelerating the solution procedure. If 0, then the projection space is not used. More important for the pressure equation.</li>
</ul>
<h2><a class="anchor" id="autotoc_md14"></a>
Flow rate forcing</h2>
<p>The optional <code>flow_rate_force</code> object can be used to force a particular flow rate through the domain. Useful for channel and pipe flows. The configuration uses the following parameters:</p>
<ul>
<li><code>direction</code>, the direction of the flow, defined as 0, 1, or 2, corresponding to x, y or z, respectively.</li>
<li><code>value</code>, the desired flow rate.</li>
<li><code>use_averaged_flow</code>, whether <code>value</code> specifies the domain-averaged (bulk) velocity or the volume flow rate.</li>
</ul>
<h2><a class="anchor" id="autotoc_md15"></a>
Full parameter table</h2>
<p>All the parameters are summarized in the table below. This includes all the subobjects discussed above, as well as keyword parameters that can be described concisely directly in the table.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Admissable values   </th><th class="markdownTableHeadNone">Default value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>scheme</code>   </td><td class="markdownTableBodyNone">The fluid solve type.   </td><td class="markdownTableBodyNone"><code>pnpn</code>   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Re</code>   </td><td class="markdownTableBodyNone">The Reynolds number.   </td><td class="markdownTableBodyNone">Positive real   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>rho</code>   </td><td class="markdownTableBodyNone">The density of the fluid.   </td><td class="markdownTableBodyNone">Positive real   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>mu</code>   </td><td class="markdownTableBodyNone">The dynamic viscosity of the fluid.   </td><td class="markdownTableBodyNone">Positive real   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>output_control</code>   </td><td class="markdownTableBodyNone">Defines the interpretation of <code>output_value</code> to define the frequency of writing checkpoint files.   </td><td class="markdownTableBodyNone"><code>nsamples</code>, <code>simulationtime</code>, <code>tsteps</code>, <code>never</code>   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>output_value</code>   </td><td class="markdownTableBodyNone">The frequency of sampling in terms of <code>output_control</code>.   </td><td class="markdownTableBodyNone">Positive real or integer   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>inflow_condition.type</code>   </td><td class="markdownTableBodyNone">Velocity inflow condition type.   </td><td class="markdownTableBodyNone"><code>user</code>, <code>uniform</code>, <code>blasius</code>   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>inflow_condition.value</code>   </td><td class="markdownTableBodyNone">Value of the inflow velocity.   </td><td class="markdownTableBodyNone">Vector of 3 reals   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>initial_condition.type</code>   </td><td class="markdownTableBodyNone">Initial condition type.   </td><td class="markdownTableBodyNone"><code>user</code>, <code>uniform</code>, <code>blasius</code>   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>initial_condition.value</code>   </td><td class="markdownTableBodyNone">Value of the velocity initial condition.   </td><td class="markdownTableBodyNone">Vector of 3 reals   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>blasius.delta</code>   </td><td class="markdownTableBodyNone">Boundary layer thickness in the Blasius profile.   </td><td class="markdownTableBodyNone">Positive real   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>blasius.freestream_velocity</code>   </td><td class="markdownTableBodyNone">Freestream velocity in the Blasius profile.   </td><td class="markdownTableBodyNone">Vector of 3 reals   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>blasius.approximation</code>   </td><td class="markdownTableBodyNone">Numerical approximation of the Blasius profile.   </td><td class="markdownTableBodyNone"><code>linear</code>, <code>quadratic</code>, <code>cubic</code>, <code>quartic</code>, <code>sin</code>   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>source_terms</code>   </td><td class="markdownTableBodyNone">Array of JSON objects, defining additional source terms.   </td><td class="markdownTableBodyNone">See list of source terms above   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>boundary_types</code>   </td><td class="markdownTableBodyNone">Boundary types/conditions labels.   </td><td class="markdownTableBodyNone">Array of strings   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>velocity_solver.type</code>   </td><td class="markdownTableBodyNone">Linear solver for the momentum equation.   </td><td class="markdownTableBodyNone"><code>cg</code>, <code>pipecg</code>, <code>bicgstab</code>, <code>cacg</code>, <code>gmres</code>   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>velocity_solver.preconditioner</code>   </td><td class="markdownTableBodyNone">Linear solver preconditioner for the momentum equation.   </td><td class="markdownTableBodyNone"><code>ident</code>, <code>hsmg</code>, <code>jacobi</code>   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>velocity_solver.absolute_tolerance</code>   </td><td class="markdownTableBodyNone">Linear solver convergence criterion for the momentum equation.   </td><td class="markdownTableBodyNone">Positive real   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>velocity_solver.maxiter</code>   </td><td class="markdownTableBodyNone">Linear solver max iteration count for the momentum equation.   </td><td class="markdownTableBodyNone">Positive real   </td><td class="markdownTableBodyNone">800    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>velocity_solver.projection_space_size</code>   </td><td class="markdownTableBodyNone">Projection space size for the momentum equation.   </td><td class="markdownTableBodyNone">Positive integer   </td><td class="markdownTableBodyNone">0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>pressure_solver.type</code>   </td><td class="markdownTableBodyNone">Linear solver for the momentum equation.   </td><td class="markdownTableBodyNone"><code>cg</code>, <code>pipecg</code>, <code>bicgstab</code>, <code>cacg</code>, <code>gmres</code>   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>pressure_solver.preconditioner</code>   </td><td class="markdownTableBodyNone">Linear solver preconditioner for the momentum equation.   </td><td class="markdownTableBodyNone"><code>ident</code>, <code>hsmg</code>, <code>jacobi</code>   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>pressure_solver.absolute_tolerance</code>   </td><td class="markdownTableBodyNone">Linear solver convergence criterion for the momentum equation.   </td><td class="markdownTableBodyNone">Positive real   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>pressure_solver.maxiter</code>   </td><td class="markdownTableBodyNone">Linear solver max iteration count for the momentum equation.   </td><td class="markdownTableBodyNone">Positive real   </td><td class="markdownTableBodyNone">800    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>pressure_solver.projection_space_size</code>   </td><td class="markdownTableBodyNone">Projection space size for the momentum equation.   </td><td class="markdownTableBodyNone">Positive integer   </td><td class="markdownTableBodyNone">0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>flow_rate_force.direction</code>   </td><td class="markdownTableBodyNone">Direction of the forced flow.   </td><td class="markdownTableBodyNone">0, 1, 2   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>flow_rate_force.value</code>   </td><td class="markdownTableBodyNone">Bulk velocity or volumetric flow rate.   </td><td class="markdownTableBodyNone">Positive real   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>flow_rate_force.use_averaged_flow</code>   </td><td class="markdownTableBodyNone">Whether bulk velocity or volumetric flow rate is given by the <code>value</code> parameter.   </td><td class="markdownTableBodyNone"><code>true</code> or <code>false</code>   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>freeze</code>   </td><td class="markdownTableBodyNone">Whether to fix the velocity field at initial conditions.   </td><td class="markdownTableBodyNone"><code>true</code> or <code>false</code>   </td><td class="markdownTableBodyNone"><code>false</code>   </td></tr>
</table>
<h1><a class="anchor" id="case-file_scalar"></a>
Scalar</h1>
<p>The scalar object allows to add a scalar transport equation to the solution. The solution variable is called <code>s</code>, but saved as <code>temperature</code> in the fld files. Some properties of the object are inherited from <code>fluid</code>: the properties of the linear solver, the value of the density, and the output control.</p>
<p>The scalar equation requires defining additional material properties: the specific heat capacity and thermal conductivity. These are provided as <code>cp</code> and <code>lambda</code>. Similarly to the fluid, one can provide the Peclet number, <code>Pe</code>, as an alternative. In this case, <code>cp</code> is set to 1 and <code>lambda</code> to the inverse of <code>Pe</code>.</p>
<p>The boundary conditions for the scalar are specified through the <code>boundary_types</code> keyword. It is possible to directly specify a uniform value for a Dirichlet boundary. The syntax is, e.g. <code>d=1</code>, to set the value to 1, see the Ryleigh-Benard example case.</p>
<p>The configuration of source terms is the same as for the fluid. A demonstration of using source terms for the scalar can be found in the <code>scalar_mms</code> example.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Admissable values   </th><th class="markdownTableHeadNone">Default value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>enabled</code>   </td><td class="markdownTableBodyNone">Whether to enable the scalar computation.   </td><td class="markdownTableBodyNone"><code>true</code> or <code>false</code>   </td><td class="markdownTableBodyNone"><code>true</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Pe</code>   </td><td class="markdownTableBodyNone">The Peclet number.   </td><td class="markdownTableBodyNone">Positive real   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>cp</code>   </td><td class="markdownTableBodyNone">Specific heat cpacity.   </td><td class="markdownTableBodyNone">Positive real   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>lambda</code>   </td><td class="markdownTableBodyNone">Thermal conductivity.   </td><td class="markdownTableBodyNone">Positive real   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>boundary_types</code>   </td><td class="markdownTableBodyNone">Boundary types/conditions labels.   </td><td class="markdownTableBodyNone">Array of strings   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>initial_condition.type</code>   </td><td class="markdownTableBodyNone">Initial condition type.   </td><td class="markdownTableBodyNone"><code>user</code>, <code>uniform</code>   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>initial_condition.value</code>   </td><td class="markdownTableBodyNone">Value of the velocity initial condition.   </td><td class="markdownTableBodyNone">Real   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>source_terms</code>   </td><td class="markdownTableBodyNone">Array of JSON objects, defining additional source terms.   </td><td class="markdownTableBodyNone">See list of source terms above   </td><td class="markdownTableBodyNone">-   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md16"></a>
Statistics</h1>
<p>This object adds the collection of statistics for the fluid fields. For additional details on the workflow, see the corresponding page in the user manual.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Admissable values   </th><th class="markdownTableHeadNone">Default value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>enabled</code>   </td><td class="markdownTableBodyNone">Whether to enable the statistics computation.   </td><td class="markdownTableBodyNone"><code>true</code> or <code>false</code>   </td><td class="markdownTableBodyNone"><code>true</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>start_time</code>   </td><td class="markdownTableBodyNone">Time at which to start gathering statistics.   </td><td class="markdownTableBodyNone">Positive real   </td><td class="markdownTableBodyNone">0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>sampling_interval</code>   </td><td class="markdownTableBodyNone">Interval, in timesteps, for sampling the flow fields for statistics.   </td><td class="markdownTableBodyNone">Positive integer   </td><td class="markdownTableBodyNone">10   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md17"></a>
Simulation components</h1>
<p>Simulation components enable the user to perform various additional operations, which are not strictly necessary to run the solver. An example could be computing and output of additional fields, e.g. vorticity.</p>
<p>A more detailed description as well as a full list of available components and their setup is provided in a <a class="el" href="../../d3/d84/simcomps.html#md_pages_simcomps">separate page of the manual</a>.</p>
<h1><a class="anchor" id="autotoc_md18"></a>
Point zones</h1>
<p>Point zones enable the user to select GLL points in the computational domain according to some geometric criterion. Two predefined geometric shapes are selectable from the case file, boxes and spheres.</p>
<p>A point zone object defined in the case file can be retrieved from the point zone registry, <code>neko_point_zone_registry</code>, and can be used to perform any zone-specific operations (e.g. localized source term, probing...). User-specific point zones can also be added manually to the point zone registry from the user file.</p>
<p>A more detailed description as well as a full list of available components and their setup is provided in a <a class="el" href="../../da/dd0/point-zones.html#md_pages_point_zones">separate page of the manual</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">Neko Manual</a></li>
    <li class="footer">Generated on Tue Mar 5 2024 03:36:28 for Neko by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
